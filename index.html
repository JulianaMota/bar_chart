<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      position: relative;
    }
    #chart {
      background-color: lightpink;
      height: 20vh;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: flex-end;
    }
    .box {
      height: 100%;
      background-color: aqua;
      width: 20px;
      z-index: 40;
    }
  </style>
  <body>
    <div id="chart"></div>
    <template id="boxes-template">
      <div class="box"></div>
    </template>
    <script>
      "use strict";
      let array = [
        20,
        90,
        50,
        30,
        100,
        10,
        60,
        70,
        100,
        80,
        20,
        90,
        50,
        30,
        100,
        10,
        60,
        70,
        100,
        80,
        20,
        90,
        50,
        30,
        100,
        10,
        60,
        70,
        100,
        80,
        20,
        90,
        50,
        30,
        100,
        10,
        60,
        70,
        100,
        80
      ];

      console.log(array);
      let number = 0;
      let maxlength = 40;
      const counter = [];

      window.addEventListener("DOMContentLoaded", init);

      function init() {
        createBoxes();
      }

      function readDataArray(array) {
        console.log(array);
        let sizes = mesur;
        number++;

        if (sizes == [40]) {
        }
        console.log(sizes[40]);
        //const numbers
        setTimeout(readDataArray, 1000);
      }

      function createBox(boxlist) {
        const clone = document
          .querySelector("#boxes-template")
          .content.cloneNode(true);

        const box = clone.querySelector(".box");
        const heightR = createRandomNumbers() + "px";
        box.style.height = heightR;
        box.style.width = "100px";

        console.log(heightR);
        const elm = document.querySelector("#chart").appendChild(clone);
      }

      function createRandomNumbers() {
        const size = Math.random() * 100;
        return size;
      }

      console.log(number);

      function createBoxes() {
        createBox();
        counter.unshift(number);
        number++;
        if (number < 40) {
          createBoxes();
        }

        if (counter.length > maxlength) {
          //Remove the first one
          document.querySelector(".box").remove();
          counter.shift(number);
        }
        setTimeout(createBoxes, 2000);
      }
    </script>
  </body>
</html>
